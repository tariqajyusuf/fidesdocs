import { Callout } from 'nextra-theme-docs'
import KeyFeatWrap, { KeyFeat } from 'components/keyfeat'

# Command: generate


The ```fides generate``` command is a multipurpose tool used to connect to a specified database/service and automatically generate Fides resources in the Fides YAML format and style. This command generates a YAML resource file based on the data source's schema. By default the documents generated by this command are written to the ```.fides``` working directory.

## Usage
Usage: ```fides generate <commands> [options] path/to/destination.yml```

This command accepts several subcommands depending on the resource being generated and the data source type. For example:

Generating a dataset accepts either ```db``` (database) or ```gcp``` (Google Cloud Platform) as the type, followed by connection information and the destination to write the generated dataset.

```console
fides generate dataset [db || gcp] {connection_information} .fides/destination.yaml
```

Generating a system accepts either ```aws``` (Amazon Web Services) or ```okta``` (Okta Sign-on) as the type, followed by connection information and the destination to write the generated dataset.

```console
fides generate system [aws || okta] {connection_information} .fides/destination.yaml
```

Here are the full list of accepted commands, subcommands and arguments:

* <span class="nx-absolute -nx-mt-20" id="dataset"></span>[```dataset```](#dataset) - Create a dataset resource from the connected data source, such as a database (e.g. SQL).
        * <span class="nx-absolute -nx-mt-20" id="dataset-db"></span>[```db```](#dataset-db) - Connect to a database directly via a SQLAlchemy-style connection.
                Accepted options for this command:
                * <span class="nx-absolute -nx-mt-20" id="dataset-db-credentials-id"></span>[```--credentials-id```](#dataset-db-credentials-id) - Use connection information already defined in the ```fides.toml``` config by specifying the key for the associated credentials in the config file.
                * <span class="nx-absolute -nx-mt-20" id="dataset-db-connection-string"></span>[```--connection-string```](#dataset-db-connection-string) - Use a connection string to connect to a database.
                * <span class="nx-absolute -nx-mt-20" id="dataset-db-include-null"></span>[```--include-null```](#dataset-db-include-null) - Include attributes in the dataset YAML that would otherwise be null in the schema.
        * <span class="nx-absolute -nx-mt-20" id="dataset-gcp"></span>[```gcp```](#dataset-gcp) - Connect to a Google Cloud Platform data source.
                * <span class="nx-absolute -nx-mt-20" id="dataset-gcp-biqquery"></span>[```bigquery```](#dataset-gcp-biqquery) - Connect to a BigQuery dataset directly via a SQLAlchemy.
                        * <span class="nx-absolute -nx-mt-20" id="dataset-gcp-biqquery-credentials-id"></span>[```--credentials-id```](#dataset-gcp-biqquery-credentials-id) - Use connection information already defined in the ```fides.toml``` config by specifying the key for the associated credentials in the config file.
                        * <span class="nx-absolute -nx-mt-20" id="dataset-gcp-biqquery-keyfile-path"></span>[```--keyfile-path```](#dataset-gcp-biqquery-keyfile-path) - Path to load BigQuery credentials from a file on your local machine.
                        * <span class="nx-absolute -nx-mt-20" id="dataset-gcp-biqquery-include-null"></span>[```--include-null```](#dataset-gcp-biqquery-include-null) - Include attributes in the dataset YAML that would otherwise be null in the schema.
* <span class="nx-absolute -nx-mt-20" id="system"></span>[```system```](#system) - Create system resources from the connected source, such as scanning infrastructure (e.g. AWS) or sign-on systems (e.g. Okta).
        * <span class="nx-absolute -nx-mt-20" id="system-aws"></span>[```aws```](#system-aws) - Connect to an AWS account and generate a system YAML file.
                Accepted options for this command:
                * <span class="nx-absolute -nx-mt-20" id="system-aws-credentials-id"></span>[```--credentials-id```](#system-aws-credentials-id) - Use AWS connection information already defined in the ```fides.toml``` config by specifying the key for the associated credentials in the config file.
                * <span class="nx-absolute -nx-mt-20" id="system-aws-access_key_id"></span>[```--access_key_id```](#system-aws-access_key_id) - Specify an access key id to connect to AWS. Connecting to AWS requires the options: ```--access_key_id```,```--secret_access_key``` and ```--region```.
                * <span class="nx-absolute -nx-mt-20" id="system-aws-secret_access_key"></span>[``` --secret_access_key```](#system-aws-secret_access_key) - Specify the secret access key for connecting to AWS. Connecting to AWS requires the options: ```--access_key_id```,```--secret_access_key``` and ```--region```.
                * <span class="nx-absolute -nx-mt-20" id="system-aws-region"></span>[``` --region```](#system-aws-region) - Specify the region to connect to for scanning AWS. Connecting to AWS requires the options: ```--access_key_id```,```--secret_access_key``` and ```--region```.
                * <span class="nx-absolute -nx-mt-20" id="system-aws-include-null"></span>[```--include-null```](#system-aws-include-null) - Include attributes in the system YAML that would otherwise be null for this system.
        * <span class="nx-absolute -nx-mt-20" id="system-okta"></span>[```okta```](#system-okta) - Connect to an Okta instance and generate a system YAMl file.
                * <span class="nx-absolute -nx-mt-20" id="system-okta-credentials-id"></span>[```--credentials-id```](#system-okta-credentials-id) - Use Okta connection information already defined in the ```fides.toml``` config by specifying the key for the associated credentials in the config file.
                * <span class="nx-absolute -nx-mt-20" id="system-okt-org-url"></span>[```--org-url```](#system-okt-org-url) - Specify the organization's Okta URL to connect to Okta. Connecting to Okta requires the options: ```--org-url``` and ```--token```.
                * <span class="nx-absolute -nx-mt-20" id="system-okta-token"></span>[``` --token```](#system-okta-token) - Specify the token to connect to Okta. Connecting to Okta requires the options: ```--org-url``` and ```--token```.
                * <span class="nx-absolute -nx-mt-20" id="system-okta-include-null"></span>[```--include-null```](#system-okta-include-null) - Include attributes in the system YAML that would otherwise be null for this system.

Running this command should result in output that resembles the following examples.

---

## Examples: Generating Datasets
Datasets are the typically the most valuable resources for developers working regularly with Fides. The ```generate dataset``` command allows you to quickly create a Fides formatted dataset from a given database to make it easy to identify sensitive data in your systems. For more in-depth details on datasets, check out the [Fides Datasets tutorial](#LINK).

### Example: Generate a Dataset from a database using a connection config file
This example uses connection details stored in the ```fides.toml``` to connect to a database and generate a dataset at the location ```.fides/database.yml```. 

In this example, ```pg-credentials``` is the key that represents the credentials in the configuration file. For more in-depth details on using configuration files, check out the [Fides Configuration tutorial](#LINK).

```console
$ fides generate dataset db \
--credentials-id "pg-credentials" .fides/database.yml
Loaded config from: .fides/fides.toml
Generated dataset manifest written to .fides/database.yml
```

### Example: Generate a Dataset from a database using a connection string
This example connects to the database  and generates a dataset at the location ```.fides/database.yml```

```console
$ fides generate dataset db \
--connection-string postgresql://username:password@localhost:5432/database .fides/database.yml
Loaded config from: .fides/fides.toml
Generated dataset manifest written to .fides/database.yml
```

### Example: Generate a Dataset from BigQuery using a connection config file
This example uses connection details stored in the ```fides.toml``` to connect to a BigQuery data warehouse and generate a dataset at the location ```.fides/datawarehouse.yml```.

In this example, ```bq-credentials``` is the key that represents the credentials in the configuration file. For more in-depth details on using configuration files, check out the [Fides Configuration tutorial](#LINK).

```console
$ fides generate dataset gcp bigquery \
--credentials-id "bq-credentials" .fides/datawarehouse.yml
Loaded config from: .fides/fides.toml
Generated dataset manifest written to .fides/datawarehouse.yml
```

### Example: Generate a Dataset from BigQuery using a service account key file
This example uses BigQuery service account credentials to connect to a BigQuery data warehouse and generate a dataset at the location ```.fides/datawarehouse.yml```. For more information on BigQuery service account key files, visit <a class="nx-text-primary-600 nx-underline" href="https://cloud.google.com/bigquery/docs/authentication/service-account-file#python" target="_blank">Google Cloud's Service Account</a> guide.

```console
$ fides generate dataset gcp bigquery \
--kefile-path "path/to/service_account.json" .fides/datawarehouse.yml
Loaded config from: .fides/fides.toml
Generated dataset manifest written to .fides/datawarehouse.yml
```
### Example: Include null attributes when generating a dataset
This example uses the ```--include-null``` flag so that the generated dataset includes all null attributes.

```console
$ fides generate dataset db \
--credentials-id "pg-credentials" \
--include-null .fides/database.yml
Loaded config from: .fides/fides.toml
Generated dataset manifest written to .fides/database.yml
```

---

## Examples: Generating System YAML
System YAMLs identify and describe the various systems that data flows through in an organization. The ```generate system``` command enables you to rapidly create a system resources YAML file by scanning infrastructure and sign-on providers. For more in-depth details on systems, check out the [Fides Systems tutorial](#LINK).

### Example: Generate Systems by scanning AWS using a connection config file
This example uses connection details stored in the ```fides.toml``` to connect to and scan an AWS account, and generate a manifest at the location ```.fides/systems.yml``` of all detected systems.

In this example, ```aws-credentials``` is the key that represents the credentials in the configuration file. To learn more about configuration files, check out the [Fides Configuration tutorial](#LINK). Separately, for more in-depth details on using Fides for system discovery, check out the [Fides System Discovery tutorial](#LINK).

```console
$ fides generate system aws \
--credentials-id "aws-credentials" .fides/systems.yml
Loaded config from: .fides/fides.toml
Generated dataset manifest written to .fides/systems.yml
```

### Example: Generate Systems by scanning AWS using credentials arguments
This example passes connection details as arguments to connect to an AWS account, scan for systems in AWS, and generate a system manifest at the location ```.fides/systems.yml```. For more in-depth details on using Fides for system discovery, check out the [Fides System Discovery tutorial](#LINK).

```console
$ fides generate system aws \
--access_key_id "AWS-ACCESS-KEY" \
--secret_access_key "AWS-SECRET-KEY" \
--region "AWS-REGION" .fides/systems.yml
Loaded config from: .fides/fides.toml
Generated system manifest written to .fides/systems.yml
```

### Example: Generate Systems by scanning Okta using a connection config file
This example uses connection details stored in the ```fides.toml``` to connect to an Okta server, scan for systems in Okta, and generate a system manifest at the location ```.fides/systems.yml```.

In this example, ```okta-credentials``` is the key that represents the credentials in the configuration file. To learn more about configuration files, check out the [Fides Configuration tutorial](#LINK). Separately, for more in-depth details on using Fides for system discovery, check out the [Fides System Discovery tutorial](#LINK).

```console
$ fides generate system okta \
--credentials-id "okta-credentials" .fides/systems.yml
Loaded config from: .fides/fides.toml
Generated system manifest written to .fides/systems.yml
```

### Example: Generate Systems by scanning Okta using credentials arguments
This example passes connection details as arguments to connect to an Okta server, scan for systems in Okta, and generate a system manifest at the location ```.fides/systems.yml```. For more in-depth details on using Fides for system discovery, check out the [Fides System Discovery tutorial](#LINK).

```console
$ fides generate system okta \
--org-url "OKTA-URL" \
--token "OKTA-TOKEN" .fides/systems.yml 
Loaded config from: .fides/fides.toml
Generated system manifest written to .fides/systems.yml
```

### Example: Include null attributes when generating a system
This example uses the ```--include-null``` flag so that the generated system includes all null attributes.

```console
$ fides generate system aws \
--credentials-id "aws-credentials" \
--include-null .fides/systems.yml
Loaded config from: .fides/fides.toml
Generated dataset manifest written to .fides/systems.yml
```