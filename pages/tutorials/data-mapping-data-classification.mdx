import { Callout } from 'nextra-theme-docs'
import KeyFeatWrap, { KeyFeat } from 'components/keyfeat'
import TutorialKey from 'components/tutorialkey'

# Getting Started with Data Mapping

<TutorialKey duration="9" product="Fides" topic="Data Mapping" video="true" interactive="true"/>

<div class="loomFrame">
  <iframe src="https://www.loom.com/embed/0c4dd3aaa3a344399f80fdb0300100b4" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen class="loom"></iframe>
</div>

## Introduction

Fides is Ethyca's [Privacy as Code](#LINK) platform that lets you make privacy a default capability of your organization's technology and processes. Fides provides a quick and efficient way to build a data map allowing you to visualize sensitive data, identify privacy risks and generate compliance reports for global privacy regulations. 

In this tutorial, you'll add a new system manually to your data map and using Fides' Discovery Scanners. You'll update your system's privacy activities, view your system on the data map and export a compliance report.

By the end of this tutorial, you'll be able to build and manage your data map using Fides 

## Prerequisites

For this tutorial you will need:

* A Fides Cloud or Fides Enterprise account
* The role of `Owner` or `Contributor` for your Fides organization.

You should also be familiar with the basics of the [Fides admin dashboard](#LINK).

## Step 1 — Adding a system to your data map

In this step, you'll add a system to your data map. Fides offers several options for adding systems to the map:

1. [Manually add a system](#manual-system-entry)
2. [Discover systems with the cloud scanner for AWS](#cloud-infrastructure-discovery-for-aws)
3. [Discover systems with the sign-on scanner for Okta](#single-sign-ondiscovery-for-okta)
4. [Discover systems by scanning network data flows](#network-data-flow-discovery-for-k8s)

### Manual system entry

To start, navigate to **Data map** → **Add systems** and choose **Add a system** to add a system manually:

![Add a system manually](/assets/img/tutorials/data-mapping-manual-add-system.gif)

From here you can search the list of available system templates:

![Search for system templates](/assets/img/tutorials/data-mapping-manual-search-system.gif)

Alternatively, to create a custom system, select **Create system** from upper right corner:

![Create a system manually](/assets/img/tutorials/data-mapping-manual-create-system.gif)

<Callout emoji="ⓘ">Using a system template will speed up your privacy operations as it uses Fides built-in privacy intelligence to pre-populate and and pre-configure integrations for privacy request processing.</Callout>

Create your system by completing the required **System details** on the **System information** tab as follows:

* <span class="nx-absolute -nx-mt-20" id="system-details-name"></span>[System name](#system-details-name) - A unique and relevant name to identify the system on the data map and in reports.
* <span class="nx-absolute -nx-mt-20" id="system-details-fides-key"></span>[System Fides key](#system-details-fides-key) - A unique key to represent this system across all Fides resources. This only accepts alphanumeric characters, hyphens and underscores, and may not contain spaces.
* <span class="nx-absolute -nx-mt-20" id="system-details-description"></span>[System description](#system-details-description) - An optional description to help other users understand what this system is.

![Complete your system information](/assets/img/tutorials/data-mapping-manual-describe-system.gif)

Next you will [add information to describe the ways in which you use data in this system](#adding-system-privacy-information-during-system-creation), these are typically called [data uses or processing activities](#adding-system-privacy-information-during-system-creation).

### Cloud infrastructure discovery for AWS

To start, navigate to **Data map** → **Add systems** and choose **Scan your infrastructure** to scan automatically.

![Scan your cloud to discover systems](/assets/img/tutorials/data-mapping-scan-infrastructure.gif)

To automatically discover systems you must first authenticate the cloud infrastructure scanner to your AWS cloud by providing the following information:

* <span class="nx-absolute -nx-mt-20" id="access-key-id"></span>[Access Key ID](#access-key-id) - The Access Key ID created by the cloud hosting provider.
* <span class="nx-absolute -nx-mt-20" id="secret"></span>[Secret](#secret) - The secret associated with the Access Key ID used for authentication.
* <span class="nx-absolute -nx-mt-20" id="default-region"></span>[Default Region](#default-region) - The geographic region of the cloud hosting provider you would like to scan.

![Authenticate the infrastructure scanner](/assets/img/tutorials/data-mapping-scan-infrastructure-authenticate.gif)

The identity which is authenticated must have appropriate permissions to complete the scan:

* ``redshift:DescribeClusters``
* ``rds:DescribeDBInstances``
* ``rds:DescribeDBClusters``

These permissions can be manually configured via your AWS IAM policy management or supplied via an IAM policy similar to the following. For more information on permissions in AWS, read AWS' <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/introduction_access-management.html" class="nx-text-primary-600 nx-underline nx-decoration-from-font" target="_blank">Overview of access management</a> here.


```json  filename="Sample IAM Policy"
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Effect": "Allow",
            "Action": [
                "redshift:DescribeClusters",
                "rds:DescribeDBInstances",
                "rds:DescribeDBClusters",
                "tag:GetResources",
            ],
            "Resource": "*"
        }
    ]
}
```
When the scan has completed, you will be presented with a list of systems discovered in your AWS cloud. You will see the scanner displays the system name, type and the resource's identifier which is typically the ARN (Amazon Resource Name) for the discovered system:

![Infrastructure scanner results of disovered systems](/assets/img/tutorials/data-mapping-scan-infrastructure-results.gif)

To add the scan results to your data map, check on the systems you would like to add and click **Register selected systems**.

### Single sign-on discovery for Okta

To start, navigate to **Data map** → **Add systems** and choose **Scan your Sign On Provider** to scan automatically.

![Scan your single sign-on provider to discover systems](/assets/img/tutorials/data-mapping-scan-sso.gif)

To automatically discover systems you must first authenticate the single sign-on scanner to your Okta account by providing the following information. For more information on roles and generating API tokens, read Okta's guide to <a href="https://help.okta.com/en-us/Content/Topics/Security/API.htm?cshid=ext_API" class="nx-text-primary-600 nx-underline nx-decoration-from-font" target="_blank">API token management</a> here.


* <span class="nx-absolute -nx-mt-20" id="org-url"></span>[Org URL](#org-url) - The URL for your organization's account on Okta.
* <span class="nx-absolute -nx-mt-20" id="okta-token"></span>[Okta token](#okta-token) - The token generated by Okta for your account.

![Authenticate the sign sign-on provider scanner](/assets/img/tutorials/data-mapping-scan-sso-authenticate.gif)

When the scan has completed, you will be presented with a list of systems discovered in your Okta account. You will see the scanner displays the system name, type and the resource's identifier which is typically the unique ID in Okta for the discovered system:

![Single sign-on provider scanner results of disovered systems](/assets/img/tutorials/data-mapping-scan-sso-results.gif)

To add the scan results to your data map, check on the systems you would like to add and click **Register selected systems**.

### Network data flow discovery for k8s

To start, navigate to **Data map** → **Add systems** and choose **Data flow scan** to scan automatically.

<Callout emoji="ⓘ">The network data flow scanner is a deployed tool. If you see it in your Fides admin dashboard, it has already been deployed and configured for your organization and does not require additional authentication. To learn more, read about the <a href="#LINK" class="nx-text-primary-600 nx-underline nx-decoration-from-font">network data flow scanner</a> here.</Callout>

The network data flow scanner works by analyzing data flowing between services in clusters such as Kubernetes (k8s). This network inspection means the data flow scanner can safely analyze the network traffic between services in your cloud and categorize the data flowing.

![Scan your network data flows to discover systems](/assets/img/tutorials/data-mapping-scan-dataflow.gif)

When the scan has completed, you will be presented with a list of systems discovered from real-time analysis of dataflow in Kubernetes (k8s) clusters in your cloud. You will see the scanner displays the system name and type:

![Network data flow scanner results of discovered systems](/assets/img/tutorials/data-mapping-scan-dataflow-results.gif)

To add the scan results to your data map, check on the systems you would like to add and click **Register selected systems**. 

After registering your systems, you will be prompted to classify the data flow between the systems. Your systems have already been registered to your map and you can complete or leave this flow without concern. If you wish to classify data flows, proceed to the step below;

### Classify sensitive data flowing between systems

The network data flow scanner will use Fides Classify, the machine learning classification engine to categorize the sensitive data flowing between systems and provide a report of findings for review.

![Machine learning sensitive data flow classification awaiting review](/assets/img/tutorials/data-mapping-scan-dataflow-classification-results.gif)

Review each system by clicking on **Awaiting Review** to see a detailed analysis of sensitive data classification for any source system and any destination system.

* <span class="nx-absolute -nx-mt-20" id="source-systems"></span>[Source Systems](#source-systems) - Other systems that are sending data to the selected system are considered sources.
* <span class="nx-absolute -nx-mt-20" id="destination-systems"></span>[Destination Systems](#destination-systems) - Systems that are receiving data from the selected system are considered destinations.

For each source and destination system, Fides will display the categories of sensitive data that have been detected flowing in network traffic:

![Machine learning sensitive data flow classification awaiting review](/assets/img/tutorials/data-mapping-scan-dataflow-classification-detail-results.gif)

After you have reviewed the list of systems, click **Finish** to complete the data flow analysis and return to the data map.

## Step 2 — Adding privacy activities to a system

Once you’ve inventoried your system and it is available on the data map,you must complete the system privacy activities information that will enable you to report on compliance, identify risks, and assist with processing privacy requests.

To add a data use, provide the following information and note that a system may have multiple data uses. Think of this as the various purposes for which you process data in the system:

* <span class="nx-absolute -nx-mt-20" id="portal-data-use"></span>[Data use](#portal-data-use) - A data use from the Fides taxonomy that represents what you are using the data for in the system.
* <span class="nx-absolute -nx-mt-20" id="portal-processing-activity"></span>[Processing Activity](#portal-processing-activity) - A more detailed description of the use of the data; this is often used for reporting purposes.
* <span class="nx-absolute -nx-mt-20" id="portal-data-categories"></span>[Data categories](#portal-data-categories) - The categories of personal data being processed by this activity.
* <span class="nx-absolute -nx-mt-20" id="portal-data-subjects"></span>[Data subjects](#portal-data-subjects) - The types of user data being processed by this activity.
* <span class="nx-absolute -nx-mt-20" id="portal-dataset-references"></span>[Dataset references](#portal-dataset-references) - An optional reference to a dataset contained in this system involved in this activity. For more information about Datasets read the [Guide to Datasets in Fides](#LINK).

There are three methods to add or update privacy related information for your systems on your data map:

1. [During manual system creation](#adding-system-privacy-information-during-system-creation)
2. [From the system management portal](#editing-system-privacy-information-from-the-system-portal)
3. [From the data map system tray](#editing-system-privacy-information-from-the-system-tray)

### Adding system privacy information during system creation
To add privacy information after creating a system manually, select the **Data uses** tab, from here you can add a **Data use** selecting the **Add a Data Use+** button.

![Adding system privacy information when creating a system manually](/assets/img/tutorials/data-mapping-data-use-system-creation.gif)

### Editing system privacy information from the system portal
To edit a system, navigate to **Data map** → **View systems** where you can search existing systems. Click the kebab menu ```...``` for your chosen system and click **Edit**.

On the system portal page, select the **Data uses** tab, from here you can add or edit a **Data use** by either clicking on an existing Data use or the **Add a Data Use+** button.

![Editing system privacy information in the system portal](/assets/img/tutorials/data-mapping-data-use-system-portal.gif)

### Editing system privacy information from the system tray

To edit a system, navigate to **Data map**, you can browse the Data map in **Map** or **Table** view. The example below uses the table view.
Select the system you are updating to see the **System tray**. 

From the System tray you can add or edit a **Data use** by either clicking on an existing Data use or the **Add a Data Use+** button.

![Editing system privacy information in the system tray](/assets/img/tutorials/data-mapping-data-use-system-tray.gif)


